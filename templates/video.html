{% extends 'base.html' %}

{% block title %}video profile: {{ video.video_title.lower() }} | ytdc{% endblock %}

{% block content %}

<div class="container">
  <div class="row page-title" id="video-row1">
    <h1>
      &ldquo;{{ video.video_title.lower() }}&rdquo;
    </h1>
        <!-- /#video-row1 -->
  </div>

  <div class="row page-title badge" id="video-row2">
    <h3>
      <a href="/explore/channels/{{ channel.channel_id }}">
        {{ channel.channel_title }}
      </a>
    </h3>

    <h5>
      {% if video.is_monetized == False %}
        <span class="badge badge-danger">
          demonetized
        </span>
      {% else %}
        <span class="badge badge-success">
          monetized
        </span>
      {% endif %}
    </h5>
    <!-- /#video-row2 -->
  </div>

<!--   <div class="row table-inside" id="basic-info-and-iframe">
    <div class="col-sm-12 col-lg-5">
      <table class="display table table-striped table-bordered table-sm">
        <thead>
          <tr>
            <th scope="col"></th>
            <th scope="col"></th>
          </tr>
        </thead>
        <tbody>
          
        </tbody>
      </table>
    </div>
    
    <div class="col-sm-12 col-lg-6">
      
    </div>
  </div>
 -->
  <div class="row table-inside" id="video-row3">
    <table id="video-details-table" class="display table table-striped table-bordered table-sm">
      <thead>
        <tr>
          <th scope="col"></th>
          <th scope="col"></th>
          <th scope="col"></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th scope="row">
            uploaded
          </th>
          <td colspan="3">
            {{ video.published_at.strftime('%B %-d, %Y') }}
          </td>
        </tr>
        <tr>
          <th scope="row">
            views
          </th>
          <td>
            {{ '{:,}'.format(video_stats.views) }}
          </td>
          <td>
            (e.g., 15% more than usual)
          </td>
        </tr>
        <tr>
          <th scope="row">
            likes
          </th>
          <td>
            {{ '{:,}'.format(video_stats.likes) }}
          </td>
          <td></td>
        </tr>
        <tr>
          <th scope="row">
            dislikes
          </th>
          <td>
            {{ '{:,}'.format(video_stats.dislikes) }}
          </td>
          <td></td>
        </tr>
        <tr>
          <th scope="row">
            comments
          </th>
          <td>
            {{ '{:,}'.format(video_stats.comments) }}
          </td>
          <td></td>
        </tr>
        <tr>
          <th scope="row">
            category
          </th>
          <td>
            <a href="/explore/categories/{{ category.video_category_id }}">
              {{ category.category_name.lower() }}
            </a>
          </td>
          <td></td>
        </tr>
        <tr>
          <th scope="row">
            duration
          </th>
          <td>
            {{ duration }}
          </td>
          <td>
            (e.g., 20% longer than usual)
          </td>
        </tr>
        <tr>
          <td colspan="3"></td>
        </tr>
        <tr>
          <th scope="row">
            thumbnail image
          </th>
            <div class="media">
              <td colspan="2"><img class="align-self-center" 
                                   src="{{ thumbnail_url }}" 
                                   width="350">
              </td>
            </div>
        </tr>
        <tr>
          <th scope="row">
            nsfw score
          </th>
          <td>
            {{ nsfw_score }}
          </td>
          <td></td>
        </tr>
        {% if colors %}
          <tr>
            <th scope="row">
              colors
            </th>
            <td colspan="2">
              {% for color in colors %}
                <div id="color-square" style="width: 20px; height: 20px; background-color: {{ color }};" data-toggle="tooltip" data-placement="left" title="{{ color }}"></div>
              {% endfor %}
            </td>
          <tr>
        {% endif %}
          <td colspan="3"></td>
        </tr>
        <tr>
          <th scope="row">
            description
          </th>
          <td colspan="2">
            {{ video.video_description }}
          </td>
        </tr>
        <tr>
          <th scope="row">
            tags
          </th>
          <td colspan="2">
            {% for tag in tags %}
              <a href="/explore/tags/{{ tag.tag_id }}">
                {{ tag.tag }}
              </a>
            {% endfor %}
          </td>      
        </tr>

        {% for text_analysis in text_analyses %}

        <tr>
          {% if text_analysis[0] == 'video_title' %}
            <th scope="row">
              title sentiment
            </th>
            <td>
              <div id="title-sentiment-score" data-toggle="tooltip" data-placement="left" title="sentiment score ranges from -1.0 (very negative) to 1.0 (very positive).">
                {% if text_analysis[1] < 0 %}
                  Score: 
                  <span class="negative" style="color: red;">
                    {{ text_analysis[1] }}
                  </span>
                {% else %}
                  score: 
                  <span class="positive" style="color: green;">
                    {{ text_analysis[1] }}
                  </span>           
                {% endif %}
              </div>

              <div id="title-sentiment-magnitude" data-toggle="tooltip" data-placement="left" title="magnitude is the strength of sentiment regardless of score and ranges from 0 to infinity.">
                magnitude: {{ text_analysis[2] }}
              </div>
            </td>
            <td></td>
          {% elif text_analysis[0] == 'video_description' %}
            <th scope="row">
              description sentiment
            </th>
            <td>
              <div id="description-sentiment-score" data-toggle="tooltip" data-placement="left" title="sentiment score ranges from -1.0 (very negative) to 1.0 (very positive).">
                {% if text_analysis[1] < 0 %}
                  score: 
                  <span class="negative" style="color: red;">
                    {{ text_analysis[1] }}
                  </span>
                {% else %}
                  score: 
                  <span class="positive" style="color: green;">
                    {{ text_analysis[1] }}
                  </span>           
                {% endif %}
              </div>
              <div id="description-sentiment-magnitude" data-toggle="tooltip" data-placement="left" title="magnitude is the strength of sentiment regardless of score and ranges from 0 to infinity.">
                magnitude: {{ text_analysis[2] }}
              </div>
            </td>
            <td></td>
          {% elif text_analysis[0] == 'video_tags' %}
            <th scope="row">
              tag sentiment
            </th>
              <div id="tag-sentiment-score" data-toggle="tooltip" data-placement="left" title="sentiment score ranges from -1.0 (very negative) to 1.0 (very positive).">
                {% if text_analysis[1] < 0 %}
                  score: 
                  <span class="negative" style="color: red;">
                    {{ text_analysis[1] }}
                  </span>
                {% else %}
                  score: 
                  <span class="positive" style="color: green;">
                    {{ text_analysis[1] }}
                  </span>           
                {% endif %}
              </div>
              <div id="tag-sentiment-magnitude" data-toggle="tooltip" data-placement="left" title="magnitude is the strength of sentiment regardless of score and ranges from 0 to infinity.">
                magnitude: {{ text_analysis[2] }}
              </div>
            <td></td>      
          {% endif %}
        </tr>

        {% endfor %}

      </tbody>
      
    </table>
    <!-- /#video-row3 -->
  </div>
  <!-- /.container -->
</div>
{% endblock %}

{% block scripts %}

{% endblock %}